<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>laparrilladeleste</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#f4f4f6">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="ParriPOS">
    <link rel="apple-touch-icon" href="assets/icons/icon.svg">
</head>

<body>
    <div class="pos-container">
        <!-- Columna Izquierda: Productos -->
        <main class="products-section">
            <header>
                <div class="header-title">
                    <img src="assets/Images/logo.jpg" alt="Logo ParriPOS"
                        style="width: 40px; height: 40px; object-fit: cover; border-radius: 4px;">
                    <h1>LAPARRILLADELESTE</h1>
                </div>
                <div class="header-actions">
                    <button onclick="window.location.href='history.html'" class="btn-outline"
                        style="border-color: var(--primary-color); color: var(--primary-color); display: flex; align-items: center; gap: 6px;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
                            <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                stroke-width="2">
                                <path
                                    d="M8 5H6a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h5.697M18 14v4h4m-4-7V7a2 2 0 0 0-2-2h-2" />
                                <path
                                    d="M8 5a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2m6 13a4 4 0 1 0 8 0a4 4 0 1 0-8 0m-6-7h4m-4 4h3" />
                            </g>
                        </svg>
                        Ver Ventas
                    </button>
                    <button id="btn-cerrar-caja" class="btn-outline">Cerrar Caja</button>
                </div>
            </header>

            <div id="category-filters" class="category-filters">
                <!-- Botones de filtro de categor√≠as generados din√°micamente -->
            </div>

            <div id="products-grid" class="products-grid">
                <!-- Productos generados din√°micamente -->
            </div>
        </main>

        <!-- Columna Derecha: Pedido -->
        <aside class="order-section">
            <h2>Pedido Actual</h2>
            <div id="order-list" class="order-list">
                <!-- Items del pedido -->
            </div>
            <div class="order-summary">
                <div class="total-row">
                    <span>Total:</span>
                    <span id="order-total">$0.00</span>
                </div>
                <button id="btn-checkout" class="btn-primary" disabled>Finalizar Venta</button>
            </div>
        </aside>
    </div>

    <!-- Modal Finalizar Venta -->
    <div id="checkout-modal" class="modal hidden">
        <div class="modal-content">
            <h2>Finalizar Venta</h2>
            <div class="modal-body">
                <div class="checkout-total">
                    <span>Total a Cobrar:</span>
                    <span id="checkout-total-amount">$0.00</span>
                </div>

                <div class="payment-methods">
                    <button class="payment-btn active" data-method="Efectivo">Efectivo</button>
                    <button class="payment-btn" data-method="Yappy">Yappy</button>
                    <button class="payment-btn" data-method="Tarjeta">Tarjeta</button>
                </div>

                <div id="cash-section" class="cash-section">
                    <label for="cash-received">Efectivo Recibido ($):</label>
                    <div class="quick-cash-buttons">
                        <button class="btn-quick-cash" data-amount="exact">Exacto</button>
                        <button class="btn-quick-cash" data-amount="5">$5</button>
                        <button class="btn-quick-cash" data-amount="10">$10</button>
                        <button class="btn-quick-cash" data-amount="20">$20</button>
                    </div>
                    <div class="keyboard-input">
                        <input type="number" id="cash-received" placeholder="Monto manual..." step="0.50">
                    </div>
                    <div class="change-display">
                        <span>Cambio:</span>
                        <span id="change-amount">$0.00</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="btn-cancel-checkout" class="btn-outline">Cancelar</button>
                <button id="btn-confirm-sale" class="btn-primary">Confirmar Venta</button>
            </div>
        </div>
    </div>


    <!-- Modal Cerrar Caja -->
    <div id="close-register-modal" class="modal hidden">
        <div class="modal-content">
            <h2>Resumen del D√≠a</h2>
            <div class="modal-body" id="print-area">
                <p id="close-register-datetime"
                    style="text-align:center; color: var(--text-muted); margin-top:-10px; margin-bottom: 20px; font-weight: 500;">
                </p>
                <div class="summary-stats">
                    <div class="stat-box">
                        <span class="stat-label">Ventas Totales</span>
                        <span class="stat-value" id="summary-count">0</span>
                    </div>
                    <div class="stat-box">
                        <span class="stat-label">Ingresos Totales</span>
                        <span class="stat-value" id="summary-total">$0.00</span>
                    </div>
                </div>
                <div class="summary-methods">
                    <h3>Por M√©todo de Pago</h3>
                    <ul id="summary-methods-list"></ul>
                </div>
            </div>
            <div class="modal-footer no-print">
                <button id="btn-close-summary" class="btn-outline">Cerrar</button>
                <button id="btn-reset-register" class="btn-danger">Reiniciar Caja</button>
            </div>
        </div>
    </div>
    <!-- Plantilla oculta para el Ticket de Compra -->
    <div id="receipt-template" class="receipt-hidden">
        <div class="receipt-header">
            <h2>L A &nbsp;&nbsp;P A R R I L L A<br>D E L &nbsp;&nbsp;E S T E</h2>
            <p>RUC: 1234567-8-90<br>Panam√°, Juan D√≠az</p>
            <p>================================</p>
            <p>TICKET DE VENTA</p>
            <p>Orden #: <strong id="receipt-order-no" style="font-size: 16px;"></strong></p>
            <p id="receipt-date"></p>
            <p>================================</p>
        </div>

        <table class="receipt-items">
            <thead>
                <tr>
                    <th style="text-align:left">Cant</th>
                    <th style="text-align:left">Desc</th>
                    <th style="text-align:right">Total</th>
                </tr>
            </thead>
            <tbody id="receipt-items-list">
                <!-- Se llena con JS -->
            </tbody>
        </table>

        <div class="receipt-totals">
            <p>================================</p>
            <p><strong>TOTAL: <span id="receipt-total-amount"></span></strong></p>
            <p>M√©todo: <span id="receipt-method"></span></p>
            <p>Recibido: <span id="receipt-cash"></span></p>
            <p>Cambio: <span id="receipt-change"></span></p>
            <p>================================</p>
        </div>

        <div class="receipt-footer">
            <p>¬°Gracias por su compra!</p>
            <p>Vuelva pronto</p>
        </div>
    </div>

    <!-- Modal Confirmaci√≥n Reinicio -->
    <div id="verify-reset-modal" class="modal hidden">
        <div class="modal-content" style="max-width: 400px; text-align: center;">
            <h2 style="color: var(--danger); margin-bottom: 10px;">‚ö†Ô∏è Atenci√≥n</h2>
            <div class="modal-body">
                <p>Est√°s a punto de borrar todas las ventas del d√≠a. Esta acci√≥n <strong>no se puede deshacer</strong>.
                </p>
                <p style="margin-top: 15px; font-weight: bold;">¬øEst√°s completamente seguro?</p>
            </div>
            <div class="modal-footer" style="justify-content: center; gap: 15px; margin-top: 20px;">
                <button id="btn-cancel-reset" class="btn-outline">Cancelar</button>
                <button id="btn-confirm-reset-strict" class="btn-danger">S√≠, Reiniciar Caja</button>
            </div>
        </div>
    </div>

    <!-- Modal Opciones de Recibo -->
    <div id="print-options-modal" class="modal hidden">
        <div class="modal-content" style="max-width: 400px; text-align: center;">
            <h2 style="margin-bottom: 20px;">Opciones de Recibo</h2>
            <div class="modal-body">
                <p>¬øQu√© deseas hacer con el recibo de la orden <strong id="options-order-no"></strong>?</p>
            </div>
            <div class="modal-footer" style="justify-content: center; gap: 15px; margin-top: 25px;">
                <button id="btn-action-print" class="btn-primary" style="flex:1;">üñ®Ô∏è Imprimir Ticket</button>
            </div>
            <button id="btn-action-skip" class="btn-outline"
                style="width: 100%; margin-top: 15px; border:none; color: var(--text-muted);">Saltar Recibo</button>
        </div>
    </div>

    <!-- Contenedor para notificaciones Toast -->
    <div id="toast-container" class="toast-container"></div>

    <script src="js/ui.js"></script>
    <script src="js/products.js"></script>
    <script src="js/order.js"></script>
    <script src="js/receipt.js"></script>
    <script src="js/checkout.js"></script>
    <script src="js/register.js"></script>
    <script src="js/script.js"></script>
</body>

</html>